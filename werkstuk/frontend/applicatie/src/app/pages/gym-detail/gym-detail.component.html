<div *ngIf="gym" class="gym-detail-container">
  <div class="gym-detail-content ">
    <div class="gym-detail-content--hero">
      <h1>{{ gym.name }}</h1>

      <div class="gym-gallery" *ngIf="gym.images && gym.images.length > 0">
        <img *ngFor="let img of gym.images" [src]="img" alt="{{ gym.name }} Image" class="gym-image">
      </div>  
    </div>

    <div class="gym-detail-content--description">
      <ul>
        <li>
          <h2> {{ gym.rating }}/5 <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="165px" width="165px" version="1.1" id="Capa_1" viewBox="0 0 47.94 47.94" xml:space="preserve" fill="#000000">
            <g id="SVGRepo_bgCarrier" stroke-width="0"/>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
            <g id="SVGRepo_iconCarrier"> <path style="fill:#ffffff;" d="M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757 c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042 c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685 c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528 c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956 C22.602,0.567,25.338,0.567,26.285,2.486z"/> </g>
          </svg></h2>
        <p>Beoordeling van de sportschool door critics </p>
        </li>
        <li>
          <h2>{{ gym.category }}</h2>
          <p>Drukte in de gym gedurende de dag</p>
        </li>
        <li>
          <h2> {{ gym.pressure }} <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" fill="none">
            <rect x="0.5" y="29.9736" width="15.8" height="29.5263" rx="7.9" fill="white" stroke="black"/>
            <rect x="22.1001" y="13.1316" width="15.8" height="46.3684" rx="7.9" fill="white" stroke="black"/>
            <rect x="43.7" y="0.5" width="15.8" height="59" rx="7.9" fill="white" stroke="black"/>
          </svg></h2>
          <p>Drukte in de gym gedurende de dag</p>
        </li>
      </ul>
    </div>

    <div class="general-information">
      <h2>Algemene informatie</h2>
      <ul>
        <li><p>Email: <strong><a href="mailto:{{ gym.email }}">{{ gym.email }}</a></strong></p></li>
        <li><p>Phone: <strong><a href="tel:{{ gym.phone }}">{{ gym.phone }}</a></strong></p></li>
        <li><p>Website: <strong><a href="{{ gym.website }}" target="_blank">{{ gym.name }}</a></strong></p></li>
        <li><p>Location: <a href="https://www.google.com/maps/place/{{ gym.address }}" target="_blank"><strong>{{ gym.city }}, {{ gym.address }}</strong></a></p></li>
        <li><p>Opening Hours: {{ gym.opening_hours }}</p></li>
      </ul>
    </div>

    <div class="comments-section">
      <h2>Comments</h2>

      <!-- Display Comments -->
      <div class="comments-list">
        <div *ngFor="let comment of gym.comments">
          <div class="comment">
            <h3>{{ comment.title }}</h3>
            <p><strong>{{ comment.user.username }}:</strong> {{ comment.comment_text }}</p>
            <p><small>Posted on: {{ comment.created_at | date:'short' }}</small></p>
            <p>Likes: {{ comment.likes }}</p>
            <button (click)="likeComment(comment.id)">Like</button>
          </div>
        </div>
      </div>

      <!-- Add Comment Form (Visible only if logged in) -->
      <div *ngIf="userId" class="add-comment-form">
        <label for="commentTitle">Title</label>
        <input type="text" [(ngModel)]="newCommentTitle" placeholder="Enter a title for your comment" id="commentTitle">

        <label for="commentText">Comment</label>
        <textarea id="commentText" [(ngModel)]="newComment" placeholder="Write your comment here..." rows="4"></textarea>
        <button (click)="submitComment()">Submit Comment</button>
      </div>

      <div *ngIf="!userId" class="login-message">
        <p>You must be logged in to add a comment!</p>
      </div>
    </div>

    <button (click)="saveGym()">ðŸ’¾ Save Gym</button>
  </div>
</div>
